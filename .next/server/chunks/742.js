exports.id=742,exports.ids=[742],exports.modules={5027:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"7f2ec24db3cb7dc34cd642a74e82f1089a47136322":()=>q,"7f95f71d6e3304bf31efca3872ef268c497101cbd6":()=>j,"7fb5d53cbf16c36a2cb20c6712801a4edc0ae37f17":()=>C,"7ff947f34dfb2505e8f67965d16859eaa2d08070f9":()=>P,"7ffa778e2a0bb4d268f5e8dbdfccc5f657610f2926":()=>S});var n=r(91199);r(42087);var i=r(7944),s=r(56037),a=r.n(s);let o=new s.Schema({name:{required:!0,type:String},details:{required:!0,type:String},location:{required:!0,type:String},imageUrl:{required:!0,type:String},interested_ids:{required:!1,type:Array},going_ids:{required:!1,type:Array},swgs:{required:!1,type:Array}}),d=a().models.events??a().model("events",o),l=new s.Schema({name:{required:!0,type:String},email:{required:!0,type:String},password:{required:!0,type:String},phone:{required:!0,type:String},bio:{required:!0,type:String}}),c=a().models.users??a().model("users",l),u=e=>JSON.parse(JSON.stringify(e)),f=e=>{if(!e||"object"!=typeof e)return e;let{_id:t,...r}={...u(e),id:e._id?.toString()};return r};async function h(e){return f(await d.findById(e).lean())}async function p(e){return await c.create(e)}async function m(e){let t=await c.findOne(e).lean();return t?f(t):null}async function v(e,t){try{let r=await d.findById(e);if(!r)return null;let n=r.interested_ids.findIndex(e=>e.toString()===t),i=new(a()).Types.ObjectId(t);-1!==n?r.interested_ids.pull(i):r.interested_ids.push(i);let s=await r.save();return f(s.toObject())}catch(e){throw console.error("Error updating interest:",e),e}}async function y(e,t){let r=await d.findById(e);r.going_ids.push(new(a()).Types.ObjectId(t)),await r.save()}var b=r(90141),g=r(80106),x=r(22570);let w=({message:e})=>(0,x.jsx)("div",{className:"text-xl",children:e});async function j(e){let t=Object.fromEntries(e);await p(t),(0,b.redirect)("/login")}async function S(e){try{let t={};return t.email=e.get("email"),t.password=e.get("password"),await m(t)}catch(e){throw e}}async function P(e,t){try{await v(e,t)}catch(e){throw e}(0,i.revalidatePath)("/")}async function C(e,t){try{await y(e,t?.id),await q(e,t)}catch(e){throw e}(0,i.revalidatePath)("/"),(0,b.redirect)("/")}async function q(e,t){try{console.log(e,t,process.env.RESEND_API_KEY);let r=await h(e),n=new g.u(process.env.RESEND_API_KEY),i=`Dear ${t?.name}, you have been successfully registered for the event, ${r?.name}. Please carry this email and your official id to the venue. We are excited to have you here.`;await n.emails.send({from:"noreply@noreply.nafisa.io",to:t?.email,subject:"Successfully Registered for the event!",react:w({message:i})})}catch(e){throw e}}(0,r(33331).D)([j,S,P,C,q]),(0,n.A)(j,"7f95f71d6e3304bf31efca3872ef268c497101cbd6",null),(0,n.A)(S,"7ffa778e2a0bb4d268f5e8dbdfccc5f657610f2926",null),(0,n.A)(P,"7ff947f34dfb2505e8f67965d16859eaa2d08070f9",null),(0,n.A)(C,"7fb5d53cbf16c36a2cb20c6712801a4edc0ae37f17",null),(0,n.A)(q,"7f2ec24db3cb7dc34cd642a74e82f1089a47136322",null)},11302:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\eventries\\\\eventry\\\\components\\\\ActionButtons.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\eventries\\eventry\\components\\ActionButtons.jsx","default")},12164:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(60687),i=r(43210),s=r(65148),a=r(16189),o=r(6475);let d=(0,o.createServerReference)("7ff947f34dfb2505e8f67965d16859eaa2d08070f9",o.callServer,void 0,o.findSourceMapURL,"addInterestedEvent"),l=({eventId:e,interestedUserIds:t,goingUserIds:r,fromDetails:o})=>{let{auth:l}=(0,s.A)(),c=(0,a.useRouter)(),u=t?.find(e=>e===l?.id),f=r?.find(e=>e===l?.id),[h,p]=(0,i.useState)(u),[m,v]=(0,i.useState)(f),[y,b]=(0,i.useTransition)(),g=async()=>{l?(await d(e,l?.id),p(!h)):c.push("/login")};return(0,n.jsxs)("div",{className:`w-full flex gap-4 mt-4 ${o&&"flex-1"}`,children:[(0,n.jsx)("button",{onClick:()=>b(()=>{g()}),className:`base-button w-full text-white ${h?"bg-indigo-600 hover:bg-indigo-900":""}`,children:"Interested"}),(0,n.jsx)("button",{disabled:l&&m,onClick:()=>{l?c.push(`/payment/${e}`):c.push("/login")},className:`text-center base-button w-full py-2 px-2 rounded-md border shadow-sm cursor-pointer transition-colors active:translate-y-1
    ${m?"bg-green-600 hover:bg-green-700 text-white":"bg-[#464849] hover:bg-[#3C3D3D] text-white"}`,children:m?"Going âœ”":"Going"})]})}},23644:(e,t,r)=>{Promise.resolve().then(r.bind(r,78576)),Promise.resolve().then(r.bind(r,26908)),Promise.resolve().then(r.t.bind(r,85814,23)),Promise.resolve().then(r.t.bind(r,46533,23))},26908:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var n=r(60687),i=r(85814),s=r.n(i),a=r(65148),o=r(16189);function d(){let{auth:e,setAuth:t}=(0,a.A)(),r=(0,o.useRouter)();return(0,n.jsx)("div",{children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"mx-2",children:["Hello, ",e?.name]}),(0,n.jsx)("span",{className:"mx-1",children:"|"}),(0,n.jsx)("a",{className:"cursor-pointer",onClick:()=>{t(null),r.push("/login")},children:"Logout"})]}):(0,n.jsx)(s(),{href:"/login",children:"Login"})})}},34095:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});let n=(0,r(43210).createContext)()},37212:(e,t,r)=>{Promise.resolve().then(r.bind(r,74234)),Promise.resolve().then(r.bind(r,40286)),Promise.resolve().then(r.t.bind(r,4536,23)),Promise.resolve().then(r.t.bind(r,49603,23))},40286:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\eventries\\\\eventry\\\\components\\\\auth\\\\SignInOut.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\eventries\\eventry\\components\\auth\\SignInOut.jsx","default")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},60943:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},65148:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(34095),i=r(43210);let s=()=>{let{auth:e,setAuth:t}=(0,i.useContext)(n.c);return{auth:e,setAuth:t}}},69191:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},72203:(e,t,r)=>{"use strict";r.d(t,{kg:()=>p,iz:()=>m,l$:()=>f,Z8:()=>h,QO:()=>y,WR:()=>v});var n=r(56037),i=r.n(n);let s=new n.Schema({name:{required:!0,type:String},details:{required:!0,type:String},location:{required:!0,type:String},imageUrl:{required:!0,type:String},interested_ids:{required:!1,type:Array},going_ids:{required:!1,type:Array},swgs:{required:!1,type:Array}}),a=i().models.events??i().model("events",s),o=new n.Schema({name:{required:!0,type:String},email:{required:!0,type:String},password:{required:!0,type:String},phone:{required:!0,type:String},bio:{required:!0,type:String}}),d=i().models.users??i().model("users",o),l=e=>JSON.parse(JSON.stringify(e)),c=e=>e.map(e=>({id:e._id?.toString(),...l({...e})})).map(({_id:e,...t})=>t),u=e=>{if(!e||"object"!=typeof e)return e;let{_id:t,...r}={...l(e),id:e._id?.toString()};return r};async function f(e){let t=[];if(e){let r=RegExp(e,"i");t=await a.find({name:{$regex:r}}).lean()}else t=await a.find().lean();return c(t)}async function h(e){return u(await a.findById(e).lean())}async function p(e){return await d.create(e)}async function m(e){let t=await d.findOne(e).lean();return t?u(t):null}async function v(e,t){try{let r=await a.findById(e);if(!r)return null;let n=r.interested_ids.findIndex(e=>e.toString()===t),s=new(i()).Types.ObjectId(t);-1!==n?r.interested_ids.pull(s):r.interested_ids.push(s);let o=await r.save();return u(o.toObject())}catch(e){throw console.error("Error updating interest:",e),e}}async function y(e,t){let r=await a.findById(e);r.going_ids.push(new(i()).Types.ObjectId(t)),await r.save()}},74234:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\eventries\\\\eventry\\\\app\\\\providers\\\\AuthProvider.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\eventries\\eventry\\app\\providers\\AuthProvider.js","default")},78576:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(60687),i=r(43210),s=r(34095);function a({children:e}){let[t,r]=(0,i.useState)(null);return(0,n.jsx)(s.c.Provider,{value:{auth:t,setAuth:r},children:e})}},82704:()=>{},92290:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v,metadata:()=>m});var n=r(37413),i=r(59525),s=r.n(i);r(82704);var a=r(53384),o=r(4536),d=r.n(o),l=r(40286);let c=()=>(0,n.jsx)("nav",{children:(0,n.jsxs)("div",{className:"container mx-auto py-4 px-2 flex justify-between items-center",children:[(0,n.jsx)("div",{className:"nav-brand",children:(0,n.jsx)(d(),{href:"/",children:(0,n.jsx)(a.default,{src:"/logo.svg",alt:"Eventry",width:135,height:135,priority:!1})})}),(0,n.jsxs)("ul",{className:"flex gap-4 text-[#9C9C9C]",children:[(0,n.jsx)("li",{children:(0,n.jsx)(l.default,{})}),(0,n.jsx)("li",{className:"",children:"About"}),(0,n.jsx)("li",{className:"",children:"Contact Us"})]})]})});var u=r(74234),f=r(56037),h=r.n(f);async function p(){try{let e=await h().connect(process.env.MONGO_URI);return console.log("connected"),e}catch(e){console.log(e)}}let m={title:"Eventry - Home",description:"Generated by create next app"};async function v({children:e}){return await p(),(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{className:s().className,children:(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c,{}),(0,n.jsx)("main",{className:"py-8",children:e})]})})})}}};